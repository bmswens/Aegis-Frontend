"use strict";(self.webpackChunkaegis_frontend=self.webpackChunkaegis_frontend||[]).push([[347],{9347:function(e,n,t){t.r(n),t.d(n,{LoadingSkeleton:function(){return C},SearchBar:function(){return g}});var r=t(1413),a=t(7762),i=t(4165),s=t(5861),l=t(9439),o=t(2791),u=t(1889),c=t(7621),d=t(9504),f=t(7391),Z=t(6151),p=t(7047),h=t(4927),x=t(7408),v=t(4891),m=t(5444),j=t(184);function g(e){var n=e.search,t=e.setSearch,r=o.useState(n),a=(0,l.Z)(r,2),i=a[0],s=a[1];return(0,j.jsx)(u.ZP,{item:!0,xs:12,children:(0,j.jsx)(c.Z,{sx:{width:"100%"},children:(0,j.jsx)(d.Z,{children:(0,j.jsxs)(v.Z,{alignItems:"flex-end",spacing:1,children:[(0,j.jsx)(f.Z,{fullWidth:!0,type:"search",label:"Search",value:i,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&t(i)}}),(0,j.jsx)(Z.Z,{variant:"contained",onClick:function(){return t(i)},children:"Search"})]})})})})}function C(e){return(0,j.jsx)(u.ZP,{item:!0,xs:12,children:(0,j.jsx)(p.Z,{variant:"rectangular",height:"15vh",width:"100%"})})}n.default=function(e){var n=o.useState(!0),t=(0,l.Z)(n,2),u=t[0],c=t[1],d=o.useState(!1),f=(0,l.Z)(d,2),Z=f[0],p=f[1],v=o.useState([]),b=(0,l.Z)(v,2),S=b[0],w=b[1],N=o.useState([]),k=(0,l.Z)(N,2),y=k[0],P=k[1],E=o.useContext(m.Z);o.useEffect((function(){w([]),P([]),c(!0)}),[E.api,E.lastUpdate]),o.useEffect((function(){function e(){return(e=(0,s.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.api.people.getPeople();case 2:n=e.sent,w(n),P(n),c(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}u&&(!function(){e.apply(this,arguments)}(),c(!1))}),[u,E.api]);var W=o.useState(""),L=(0,l.Z)(W,2),I=L[0],z=L[1];return o.useEffect((function(){p(!0)}),[I]),o.useEffect((function(){if(S&&I&&Z){var e,n=I.toLowerCase(),t=[],r=(0,a.Z)(S);try{for(r.s();!(e=r.n()).done;){var i=e.value;("".concat(i.firstName," ").concat(i.lastName).toLowerCase().includes(n)||i.email.toLowerCase().includes(n)||i.phone.toLowerCase().includes(n)||i.address.toLowerCase().includes(n))&&t.push(i)}}catch(s){r.e(s)}finally{r.f()}P(t),p(!1)}else S&&Z&&!I&&(P(S),p(!1))}),[S,I,Z,P]),(0,j.jsxs)(h.u,{children:[(0,j.jsx)(g,{search:I,setSearch:z}),u||Z?[1,2,3,4,5].map((function(e){return(0,j.jsx)(C,{},e)})):y.map((function(e){return(0,j.jsx)(x.Z,(0,r.Z)({},e),e.id)}))]})}},7408:function(e,n,t){var r=t(9439),a=t(2791),i=t(68),s=t(3400),l=t(2363),o=t(4554),u=t(1889),c=t(7621),d=t(9585),f=t(8562),Z=t(4281),p=t(6601),h=t(6002),x=t(5584),v=t(1286),m=t(7247),j=t(1087),g=t(9015),C=t(9690),b=t(943),S=t(5444),w=t(184);function N(e){var n=e.title,t=e.url,r=e.children;return(0,w.jsx)(j.rU,{to:t,target:"_blank",children:(0,w.jsx)(i.Z,{title:n,children:(0,w.jsx)(s.Z,{"aria-label":n,children:r})})})}function k(e){var n=e.id,t=e.firstName,i=e.lastName,l=e.title,o=e.address,u=e.email,c=e.phone,d=e.supervisor,f=e.teams,Z=a.useContext(C.ZP),p=a.useContext(S.Z),h=a.useState(!1),x=(0,r.Z)(h,2),j=x[0],N=x[1],k=a.useState(!1),y=(0,r.Z)(k,2),P=y[0],E=y[1];if(!Z.admin)return null;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(s.Z,{"aria-label":"Edit Person",onClick:function(){return N(!0)},children:(0,w.jsx)(v.Z,{fontSize:"large"})}),(0,w.jsx)(s.Z,{"aria-label":"Delete Person",onClick:function(){return E(!0)},children:(0,w.jsx)(m.Z,{fontSize:"large"})}),(0,w.jsx)(g.Z,{open:j,close:function(){return N(!1)},person:{id:n,firstName:t,lastName:i,title:l,address:o,phone:c,email:u,supervisor:d,teams:f}}),(0,w.jsx)(b.Z,{open:P,close:function(){return E(!1)},callback:function(){p.api.people.deletePerson(n),p.update()},text:"Are you sure you want to delete the entry for ".concat(t," ").concat(i,"?")})]})}function y(e){var n=e.id,t=e.firstName,u=e.lastName,c=e.title,d=e.address,v=e.email,m=e.phone,j=e.supervisor,b=e.teams,S=a.useContext(C.ZP),y="";d&&(y="https://www.google.com/maps/place/".concat(encodeURIComponent(d)));var P=a.useState(!1),E=(0,r.Z)(P,2),W=E[0],L=E[1];return(0,w.jsxs)(l.Z,{children:[S.admin?null:(0,w.jsx)(i.Z,{title:"More Info",children:(0,w.jsx)(s.Z,{"aria-label":"More Info",onClick:function(){return L(!0)},children:(0,w.jsx)(x.Z,{fontSize:"large"})})}),(0,w.jsx)(k,{id:n,firstName:t,lastName:u,title:c,address:d,email:v,phone:m,supervisor:j,teams:b}),(0,w.jsx)(o.Z,{sx:{flexGrow:1}}),(0,w.jsx)(N,{title:"View Address",url:y,children:(0,w.jsx)(f.Z,{fontSize:"large"})}),(0,w.jsx)(N,{title:"Send Email",url:"mailto:".concat(v),children:(0,w.jsx)(Z.Z,{fontSize:"large"})}),(0,w.jsx)(N,{title:"Send Text",url:"sms:".concat(m),children:(0,w.jsx)(p.Z,{fontSize:"large"})}),(0,w.jsx)(N,{title:"Call",url:"tel:".concat(m),children:(0,w.jsx)(h.Z,{fontSize:"large"})}),(0,w.jsx)(g.Z,{open:W,close:function(){return L(!1)},viewOnly:!0,person:{id:n,firstName:t,lastName:u,title:c,address:d,phone:m,email:v,supervisor:j,teams:b}})]})}n.Z=function(e){var n=e.id,t=e.firstName,r=e.lastName,a=e.title,i=e.address,s=e.email,l=e.phone,o=e.supervisor,f=e.teams;return(0,w.jsx)(u.ZP,{item:!0,xs:12,children:(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{title:"".concat(t," ").concat(r),subheader:a}),(0,w.jsx)(y,{id:n,firstName:t,lastName:r,title:a,address:i,email:s,phone:l,supervisor:o,teams:f})]})})}},943:function(e,n,t){var r=t(5289),a=t(5661),i=t(9157),s=t(1691),l=t(7123),o=t(6151),u=(t(2791),t(184));n.Z=function(e){var n=e.open,t=e.close,c=e.callback,d=e.text;return(0,u.jsxs)(r.Z,{open:n,onClose:t,children:[(0,u.jsx)(a.Z,{align:"center",children:"Confirmation Dialog"}),(0,u.jsx)(i.Z,{children:(0,u.jsx)(s.Z,{children:d})}),(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(o.Z,{variant:"contained",onClick:t,children:"Cancel"}),(0,u.jsx)(o.Z,{variant:"contained",onClick:function(){c(),t()},children:"Confirm"})]})]})}},9015:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(4165),a=t(1413),i=t(5861),s=t(9439),l=t(2791),o=t(5289),u=t(5661),c=t(9157),d=t(3767),f=t(7391),Z=t(7123),p=t(6151),h=t(5444),x=t(3766),v=t(184);var m=function(e){var n=e.value,t=e.setValue,o=e.disabled,u=l.useState(!0),c=(0,s.Z)(u,2),d=c[0],Z=c[1],p=l.useState([]),m=(0,s.Z)(p,2),j=m[0],g=m[1],C=l.useContext(h.Z).api;return l.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.people.getShortPeople();case 2:n=e.sent,g(n),Z(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C.people,C.driver]),(0,v.jsx)(x.Z,{disabled:o,fullWidth:!0,loading:d,value:n,options:j,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(n)},renderInput:function(e){return(0,v.jsx)(f.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Supervisor"}))},isOptionEqualToValue:function(e,n){return e.id===n.id}})};var j=function(e){var n=e.value,t=e.setValue,o=e.disabled,u=l.useState(!0),c=(0,s.Z)(u,2),d=c[0],Z=c[1],p=l.useState([]),m=(0,s.Z)(p,2),j=m[0],g=m[1],C=l.useContext(h.Z).api;return l.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.org.getShortOrgs();case 2:n=e.sent,g(n),Z(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C.org,C.driver]),(0,v.jsx)(x.Z,{multiple:!0,disabled:o,fullWidth:!0,loading:d,value:n,options:j,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(n)},renderInput:function(e){return(0,v.jsx)(f.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Team"}))},isOptionEqualToValue:function(e,n){return e.id===n.id}})},g={id:null,firstName:"",lastName:"",title:"",address:"",email:"",phone:"",supervisor:null,teams:[]};var C=function(e){var n=e.open,t=e.close,x=e.person,C=e.viewOnly,b=function(e){if(!e)return g;var n={};for(var t in g)void 0===e[t]?n[t]=g[t]:n[t]=e[t];return n}(x),S=l.useState(b),w=(0,s.Z)(S,2),N=w[0],k=w[1],y=l.useContext(h.Z).api;function P(){C||null!==x&&void 0!==x&&x.id||k(g),t()}function E(){return(E=(0,i.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,a.Z)({},N),null!==(n=N.supervisor)&&void 0!==n&&n.id&&(t.supervisor=N.supervisor.id),N.teams.length&&(t.teams=N.teams.map((function(e){return e.id}))),!N.id){e.next=8;break}return e.next=6,y.people.updatePerson(t);case 6:e.next=10;break;case 8:return e.next=10,y.people.addPerson(t);case 10:P();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W="Add New Person";return C?W="Person Info":null!==x&&void 0!==x&&x.id&&(W="Edit Info"),(0,v.jsxs)(o.Z,{maxWidth:"sm",fullWidth:!0,open:n,onClose:P,children:[(0,v.jsx)(u.Z,{align:"center",children:W}),(0,v.jsx)(c.Z,{children:(0,v.jsxs)(d.Z,{spacing:1,sx:{marginTop:1},children:[(0,v.jsx)(f.Z,{disabled:C,label:"First Name",fullWidth:!0,value:N.firstName,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{firstName:e.target.value}))}}),(0,v.jsx)(f.Z,{disabled:C,label:"Last Name",fullWidth:!0,value:N.lastName,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{lastName:e.target.value}))}}),(0,v.jsx)(f.Z,{disabled:C,label:"Title",fullWidth:!0,value:N.title,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{title:e.target.value}))}}),(0,v.jsx)(f.Z,{disabled:C,label:"Address",fullWidth:!0,value:N.address,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{address:e.target.value}))}}),(0,v.jsx)(f.Z,{disabled:C,label:"Email",fullWidth:!0,value:N.email,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{email:e.target.value}))}}),(0,v.jsx)(f.Z,{disabled:C,label:"Phone",fullWidth:!0,value:N.phone,onChange:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{phone:e.target.value}))}}),(0,v.jsx)(m,{disabled:C,value:N.supervisor,setValue:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{supervisor:e}))}}),(0,v.jsx)(j,{disabled:C,value:N.teams,setValue:function(e){return k((0,a.Z)((0,a.Z)({},N),{},{teams:e}))}})]})}),(0,v.jsxs)(Z.Z,{children:[(0,v.jsx)(p.Z,{onClick:P,variant:"contained",children:C?"Close":"Cancel"}),C?null:(0,v.jsx)(p.Z,{onClick:function(){return E.apply(this,arguments)},variant:"contained",children:"Submit"})]})]})}}}]);
//# sourceMappingURL=347.dba725ba.chunk.js.map