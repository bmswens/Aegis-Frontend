"use strict";(self.webpackChunkaegis_frontend=self.webpackChunkaegis_frontend||[]).push([[579],{6280:function(e,n,t){t.d(n,{Z:function(){return H}});var r=t(4165),a=t(5861),i=t(9439),o=t(2791),l=t(3400),s=t(68),c=t(3967),u=t(1889),d=t(7621),f=t(9585),h=t(3044),Z=t(2363),x=t(4554),v=t(8562),m=t(4281),p=t(6002),j=t(5584),g=t(5536),b=t(1286),S=t(7247),w=t(1087),C=t(1413),k=t(1918),y=t(5289),z=t(5661),A=t(9157),P=t(3767),T=t(7391),W=t(4721),M=t(7123),R=t(6151),D=t(184);function E(e){var n=e.name,t=e.id;return(0,D.jsx)(w.rU,{to:"/people?search=".concat(t),style:{textDecoration:"none",color:"inherit"},children:(0,D.jsx)(k.Z,{label:n,color:"primary",clickable:!0})})}var L=function(e){var n=e.open,t=e.close,r=e.name,a=e.address,i=e.email,o=e.phone,l=e.admins||[];return(0,D.jsxs)(y.Z,{maxWidth:"sm",fullWidth:!0,open:n,onClose:t,children:[(0,D.jsx)(z.Z,{align:"center",children:"Team Info"}),(0,D.jsx)(A.Z,{children:(0,D.jsxs)(P.Z,{spacing:1,sx:{marginTop:1},children:[(0,D.jsx)(T.Z,{disabled:!0,fullWidth:!0,label:"Name",value:r}),(0,D.jsx)(T.Z,{disabled:!0,fullWidth:!0,label:"Address",value:a}),(0,D.jsx)(T.Z,{disabled:!0,fullWidth:!0,label:"Email",value:i}),(0,D.jsx)(T.Z,{disabled:!0,fullWidth:!0,label:"Phone",value:o}),(0,D.jsx)(W.Z,{children:"Admins"}),(0,D.jsx)(P.Z,{direction:"row",spacing:1,children:l.map((function(e){return(0,D.jsx)(E,(0,C.Z)({},e),e.id)}))})]})}),(0,D.jsx)(M.Z,{children:(0,D.jsx)(R.Z,{variant:"contained",onClick:t,children:"Close"})})]})},N=t(9690),I=t(593),F=t(943),V=t(5444);function U(e){var n=e.team,t=o.useContext(N.ZP),s=o.useContext(V.Z),c=o.useState(!1),u=(0,i.Z)(c,2),d=u[0],f=u[1],h=o.useState(!1),Z=(0,i.Z)(h,2),x=Z[0],v=Z[1];function m(){return(m=(0,a.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.api.org.deleteTeam(n.id);case 2:s.update();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return t.admin?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(l.Z,{"aria-label":"Edit Team",onClick:function(){return f(!0)},children:(0,D.jsx)(b.Z,{fontSize:"large"})}),(0,D.jsx)(l.Z,{"aria-label":"Delete Team",onClick:function(){return v(!0)},children:(0,D.jsx)(S.Z,{fontSize:"large"})}),(0,D.jsx)(I.Z,{open:d,close:function(){return f(!1)},team:n}),(0,D.jsx)(F.Z,{open:x,close:function(){return v(!1)},callback:function(){return m.apply(this,arguments)},text:"Are you sure you want to delete the entry for ".concat(n.name,"?")})]}):null}function _(e){var n=e.title,t=e.to,r=e.icon,a=e.external;return t?(0,D.jsx)(w.rU,{to:t,target:a?"_blank":"_self",children:(0,D.jsx)(s.Z,{title:n,children:(0,D.jsx)(l.Z,{"aria-label":n,children:r})})}):(0,D.jsx)(s.Z,{title:n,children:(0,D.jsx)("span",{children:(0,D.jsx)(l.Z,{"aria-label":n,disabled:!0,children:r})})})}var H=function(e){var n=(0,c.Z)(),t=e.name,r=e.id,a=e.memberCount,b=e.address,S=e.email,w=e.phone,C=e.admins,k=e.noLink,y="";b&&(y="https://www.google.com/maps/place/".concat(encodeURIComponent(b)));var z="";S&&(z="mailto:".concat(S));var A="";w&&(A="tel:".concat(w));var P=o.useState(!1),T=(0,i.Z)(P,2),W=T[0],M=T[1];return o.useEffect((function(){return function(){return M(!1)}}),[]),(0,D.jsxs)(u.ZP,{item:!0,xs:12,children:[(0,D.jsxs)(d.Z,{children:[(0,D.jsx)(f.Z,{title:t,titleTypographyProps:{variant:"h5"},avatar:(0,D.jsx)(s.Z,{title:"Member Count",children:(0,D.jsx)(h.Z,{sx:{bgcolor:n.palette.primary.dark},children:a})})}),(0,D.jsxs)(Z.Z,{children:[(0,D.jsx)(s.Z,{title:"More Info",children:(0,D.jsx)(l.Z,{onClick:function(){return M(!0)},children:(0,D.jsx)(j.Z,{fontSize:"large"})})}),k?null:(0,D.jsx)(_,{title:"Details",to:"/teams/".concat(r),icon:(0,D.jsx)(g.Z,{fontSize:"large"})}),(0,D.jsx)(U,{team:{id:r,name:t,address:b,phone:w,email:S}}),(0,D.jsx)(x.Z,{sx:{flexGrow:1}}),(0,D.jsx)(_,{external:!0,title:"View Address",to:y,icon:(0,D.jsx)(v.Z,{fontSize:"large"})}),(0,D.jsx)(_,{external:!0,title:"Send Email",to:z,icon:(0,D.jsx)(m.Z,{fontSize:"large"})}),(0,D.jsx)(_,{external:!0,title:"Call",to:A,icon:(0,D.jsx)(p.Z,{fontSize:"large"})})]})]}),(0,D.jsx)(L,{open:W,close:function(){return M(!1)},name:t,address:b,email:S,phone:w,admins:C})]})}},1579:function(e,n,t){t.r(n);var r=t(1413),a=t(7762),i=t(4165),o=t(5861),l=t(9439),s=t(2791),c=t(4927),u=t(9347),d=t(6280),f=t(5444),h=t(184);n.default=function(e){var n=s.useState(!0),t=(0,l.Z)(n,2),Z=t[0],x=t[1],v=s.useState([]),m=(0,l.Z)(v,2),p=m[0],j=m[1],g=s.useState([]),b=(0,l.Z)(g,2),S=b[0],w=b[1],C=s.useContext(f.Z);s.useEffect((function(){function e(){return(e=(0,o.Z)((0,i.Z)().mark((function e(){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.api.org.getOrgs();case 2:n=e.sent,j(n),w(n),x(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[C.api.org,C.api.driver,C.lastUpdate]);var k=s.useState(""),y=(0,l.Z)(k,2),z=y[0],A=y[1];return s.useEffect((function(){x(!0)}),[z]),s.useEffect((function(){if(p&&z&&Z){var e,n=z.toLowerCase(),t=[],r=(0,a.Z)(p);try{for(r.s();!(e=r.n()).done;){var i=e.value;(i.name.toLowerCase().includes(n)||i.email.toLowerCase().includes(n)||i.phone.toLowerCase().includes(n)||i.address.toLowerCase().includes(n))&&t.push(i)}}catch(o){r.e(o)}finally{r.f()}w(t),x(!1)}else p&&Z&&!z&&(w(p),x(!1))}),[p,z,Z,w]),(0,h.jsxs)(c.u,{children:[(0,h.jsx)(u.SearchBar,{search:z,setSearch:A}),Z?[1,2,3,4,5].map((function(e){return(0,h.jsx)(u.LoadingSkeleton,{},e)})):S.map((function(e){return(0,h.jsx)(d.Z,(0,r.Z)({},e),e.id)}))]})}},593:function(e,n,t){var r=t(4165),a=t(1413),i=t(5861),o=t(9439),l=t(2791),s=t(5289),c=t(5661),u=t(9157),d=t(3767),f=t(7391),h=t(7123),Z=t(6151),x=t(5444),v=t(184),m={id:null,name:"",address:"",email:"",phone:""};n.Z=function(e){var n=e.open,t=e.close,p=e.team,j=m;null!==p&&void 0!==p&&p.id&&(j=p);var g=l.useState(j),b=(0,o.Z)(g,2),S=b[0],w=b[1],C=l.useContext(x.Z).api;function k(){null!==p&&void 0!==p&&p.id||w(m),t()}function y(){return(y=(0,i.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===p||void 0===p||!p.id){e.next=5;break}return e.next=3,C.org.editTeam(S);case 3:e.next=7;break;case 5:return e.next=7,C.org.addTeam(S);case 7:k();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,v.jsxs)(s.Z,{maxWidth:"sm",fullWidth:!0,open:n,onClose:k,children:[(0,v.jsx)(c.Z,{align:"center",children:null!==p&&void 0!==p&&p.id?"Edit Team":"Add New Team"}),(0,v.jsx)(u.Z,{children:(0,v.jsxs)(d.Z,{spacing:1,sx:{marginTop:1},children:[(0,v.jsx)(f.Z,{label:"Name",fullWidth:!0,value:S.name,onChange:function(e){return w((0,a.Z)((0,a.Z)({},S),{},{name:e.target.value}))}}),(0,v.jsx)(f.Z,{label:"Address",fullWidth:!0,value:S.address,onChange:function(e){return w((0,a.Z)((0,a.Z)({},S),{},{address:e.target.value}))}}),(0,v.jsx)(f.Z,{label:"Email",fullWidth:!0,value:S.email,onChange:function(e){return w((0,a.Z)((0,a.Z)({},S),{},{email:e.target.value}))}}),(0,v.jsx)(f.Z,{label:"Phone",fullWidth:!0,value:S.phone,onChange:function(e){return w((0,a.Z)((0,a.Z)({},S),{},{phone:e.target.value}))}})]})}),(0,v.jsxs)(h.Z,{children:[(0,v.jsx)(Z.Z,{variant:"contained",onClick:k,children:"Cancel"}),(0,v.jsx)(Z.Z,{variant:"contained",onClick:function(){return y.apply(this,arguments)},children:"Submit"})]})]})}},5536:function(e,n,t){var r=t(4836);n.Z=void 0;var a=r(t(5649)),i=t(184),o=(0,a.default)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}),"Launch");n.Z=o},3044:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(9439),a=t(3366),i=t(7462),o=t(2791),l=t(8182),s=t(4419),c=t(6934),u=t(1402),d=t(9201),f=t(184),h=(0,d.Z)((0,f.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),Z=t(5878),x=t(1217);function v(e){return(0,x.Z)("MuiAvatar",e)}(0,Z.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var m=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],p=(0,c.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n[t.variant],t.colorDefault&&n.colorDefault]}})((function(e){var n=e.theme,t=e.ownerState;return(0,i.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===t.variant&&{borderRadius:(n.vars||n).shape.borderRadius},"square"===t.variant&&{borderRadius:0},t.colorDefault&&(0,i.Z)({color:(n.vars||n).palette.background.default},n.vars?{backgroundColor:n.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===n.palette.mode?n.palette.grey[400]:n.palette.grey[600]}))})),j=(0,c.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,n){return n.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),g=(0,c.ZP)(h,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,n){return n.fallback}})({width:"75%",height:"75%"});var b=o.forwardRef((function(e,n){var t=(0,u.Z)({props:e,name:"MuiAvatar"}),c=t.alt,d=t.children,h=t.className,Z=t.component,x=void 0===Z?"div":Z,b=t.imgProps,S=t.sizes,w=t.src,C=t.srcSet,k=t.variant,y=void 0===k?"circular":k,z=(0,a.Z)(t,m),A=null,P=function(e){var n=e.crossOrigin,t=e.referrerPolicy,a=e.src,i=e.srcSet,l=o.useState(!1),s=(0,r.Z)(l,2),c=s[0],u=s[1];return o.useEffect((function(){if(a||i){u(!1);var e=!0,r=new Image;return r.onload=function(){e&&u("loaded")},r.onerror=function(){e&&u("error")},r.crossOrigin=n,r.referrerPolicy=t,r.src=a,i&&(r.srcset=i),function(){e=!1}}}),[n,t,a,i]),c}((0,i.Z)({},b,{src:w,srcSet:C})),T=w||C,W=T&&"error"!==P,M=(0,i.Z)({},t,{colorDefault:!W,component:x,variant:y}),R=function(e){var n=e.classes,t={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,s.Z)(t,v,n)}(M);return A=W?(0,f.jsx)(j,(0,i.Z)({alt:c,src:w,srcSet:C,sizes:S,ownerState:M,className:R.img},b)):null!=d?d:T&&c?c[0]:(0,f.jsx)(g,{ownerState:M,className:R.fallback}),(0,f.jsx)(p,(0,i.Z)({as:x,ownerState:M,className:(0,l.Z)(R.root,h),ref:n},z,{children:A}))}))}}]);
//# sourceMappingURL=579.2d7a362f.chunk.js.map