"use strict";(self.webpackChunkaegis_frontend=self.webpackChunkaegis_frontend||[]).push([[523],{2159:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(4165),a=t(5861),i=t(9439),s=t(1413),l=t(2791),o=t(9886),u=t(5193),c=t(2363),d=t(4554),f=t(3400),Z=t(1889),p=t(7621),x=t(9504),h=t(3766),m=t(7391),v=t(7482),j=t(7831),g=t(8370),b=t(6263),C=t(4927),S=t(5444),N=t(7408),k=t(184);function w(e){var n=e.nodeData;return(0,k.jsx)(N.Z,(0,s.Z)({},n))}function y(e){var n=e.data,t=(0,o.u)(),r=(0,u.Z)(t.breakpoints.down("md")),a=l.useState(r?.4:1),s=(0,i.Z)(a,2),Z=s[0],p=s[1];return l.useEffect((function(){if(r){var e=document.getElementsByClassName("orgchart chart");if(e.length)e[0].style.transform="matrix(".concat(Z,", 0, 0, ").concat(Z,", 0, 0)")}}),[Z,r]),l.useEffect((function(){}),[n,p,r]),r?(0,k.jsxs)(c.Z,{children:[(0,k.jsx)(d.Z,{sx:{flexGrow:1}}),(0,k.jsx)(f.Z,{"aria-label":"Zoom Out",onClick:function(){return p(Z-.1)},disabled:!n.firstName||Z<=.2,children:(0,k.jsx)(j.Z,{fontSize:"large"})}),(0,k.jsx)(f.Z,{"aria-label":"Zoom In",disabled:!n.firstName,onClick:function(){return p(Z+.1)},children:(0,k.jsx)(g.Z,{fontSize:"large"})})]}):null}function E(e){var n=e.data,t=e.setData,o=l.useState(null),u=(0,i.Z)(o,2),c=u[0],d=u[1],f=l.useState(!0),j=(0,i.Z)(f,2),g=j[0],b=j[1],C=l.useState([]),N=(0,i.Z)(C,2),w=N[0],E=N[1],P=l.useContext(S.Z).api;return l.useEffect((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.org.getShortOrgs();case 2:n=e.sent,E(n),b(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[P.org,P.driver]),l.useEffect((function(){b(!0),t({})}),[c,t]),l.useEffect((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.org.getOrgChart(c.id);case 2:n=e.sent,t(n),b(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&c?function(){e.apply(this,arguments)}():g&&!c&&b(!1)}),[g,c,t,P.org,P.driver]),(0,k.jsx)(Z.ZP,{item:!0,xs:12,children:(0,k.jsxs)(p.Z,{children:[(0,k.jsx)(x.Z,{children:(0,k.jsx)(h.Z,{fullWidth:!0,value:c,onChange:function(e,n){return d(n)},options:w,getOptionLabel:function(e){return e.name},renderInput:function(e){return(0,k.jsx)(m.Z,(0,s.Z)((0,s.Z)({},e),{},{label:"Team"}))}})}),(0,k.jsx)(y,{data:n}),g?(0,k.jsx)(v.Z,{}):null]})})}var P=function(e){var n=l.useState({}),t=(0,i.Z)(n,2),r=t[0],a=t[1];return(0,k.jsxs)(C.u,{children:[(0,k.jsx)(E,{data:r,setData:a}),r.firstName?(0,k.jsx)(b.Z,{chartClass:"chart",datasource:r,NodeTemplate:w,pan:!0,zoom:!0,collapsible:!1}):null]})}},7408:function(e,n,t){var r=t(9439),a=t(2791),i=t(68),s=t(3400),l=t(2363),o=t(4554),u=t(1889),c=t(7621),d=t(9585),f=t(8562),Z=t(4281),p=t(6601),x=t(6002),h=t(5584),m=t(1286),v=t(7247),j=t(1087),g=t(9015),b=t(9690),C=t(943),S=t(5444),N=t(184);function k(e){var n=e.title,t=e.url,r=e.children;return(0,N.jsx)(j.rU,{to:t,target:"_blank",children:(0,N.jsx)(i.Z,{title:n,children:(0,N.jsx)(s.Z,{"aria-label":n,children:r})})})}function w(e){var n=e.id,t=e.firstName,i=e.lastName,l=e.title,o=e.address,u=e.email,c=e.phone,d=e.supervisor,f=e.teams,Z=a.useContext(b.ZP),p=a.useContext(S.Z),x=a.useState(!1),h=(0,r.Z)(x,2),j=h[0],k=h[1],w=a.useState(!1),y=(0,r.Z)(w,2),E=y[0],P=y[1];if(!Z.admin)return null;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(s.Z,{"aria-label":"Edit Person",onClick:function(){return k(!0)},children:(0,N.jsx)(m.Z,{fontSize:"large"})}),(0,N.jsx)(s.Z,{"aria-label":"Delete Person",onClick:function(){return P(!0)},children:(0,N.jsx)(v.Z,{fontSize:"large"})}),(0,N.jsx)(g.Z,{open:j,close:function(){return k(!1)},person:{id:n,firstName:t,lastName:i,title:l,address:o,phone:c,email:u,supervisor:d,teams:f}}),(0,N.jsx)(C.Z,{open:E,close:function(){return P(!1)},callback:function(){p.api.people.deletePerson(n),p.update()},text:"Are you sure you want to delete the entry for ".concat(t," ").concat(i,"?")})]})}function y(e){var n=e.id,t=e.firstName,u=e.lastName,c=e.title,d=e.address,m=e.email,v=e.phone,j=e.supervisor,C=e.teams,S=a.useContext(b.ZP),y="";d&&(y="https://www.google.com/maps/place/".concat(encodeURIComponent(d)));var E=a.useState(!1),P=(0,r.Z)(E,2),O=P[0],W=P[1];return(0,N.jsxs)(l.Z,{children:[S.admin?null:(0,N.jsx)(i.Z,{title:"More Info",children:(0,N.jsx)(s.Z,{"aria-label":"More Info",onClick:function(){return W(!0)},children:(0,N.jsx)(h.Z,{fontSize:"large"})})}),(0,N.jsx)(w,{id:n,firstName:t,lastName:u,title:c,address:d,email:m,phone:v,supervisor:j,teams:C}),(0,N.jsx)(o.Z,{sx:{flexGrow:1}}),(0,N.jsx)(k,{title:"View Address",url:y,children:(0,N.jsx)(f.Z,{fontSize:"large"})}),(0,N.jsx)(k,{title:"Send Email",url:"mailto:".concat(m),children:(0,N.jsx)(Z.Z,{fontSize:"large"})}),(0,N.jsx)(k,{title:"Send Text",url:"sms:".concat(v),children:(0,N.jsx)(p.Z,{fontSize:"large"})}),(0,N.jsx)(k,{title:"Call",url:"tel:".concat(v),children:(0,N.jsx)(x.Z,{fontSize:"large"})}),(0,N.jsx)(g.Z,{open:O,close:function(){return W(!1)},viewOnly:!0,person:{id:n,firstName:t,lastName:u,title:c,address:d,phone:v,email:m,supervisor:j,teams:C}})]})}n.Z=function(e){var n=e.id,t=e.firstName,r=e.lastName,a=e.title,i=e.address,s=e.email,l=e.phone,o=e.supervisor,f=e.teams;return(0,N.jsx)(u.ZP,{item:!0,xs:12,children:(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(d.Z,{title:"".concat(t," ").concat(r),subheader:a}),(0,N.jsx)(y,{id:n,firstName:t,lastName:r,title:a,address:i,email:s,phone:l,supervisor:o,teams:f})]})})}},943:function(e,n,t){var r=t(5289),a=t(5661),i=t(9157),s=t(1691),l=t(7123),o=t(6151),u=(t(2791),t(184));n.Z=function(e){var n=e.open,t=e.close,c=e.callback,d=e.text;return(0,u.jsxs)(r.Z,{open:n,onClose:t,children:[(0,u.jsx)(a.Z,{align:"center",children:"Confirmation Dialog"}),(0,u.jsx)(i.Z,{children:(0,u.jsx)(s.Z,{children:d})}),(0,u.jsxs)(l.Z,{children:[(0,u.jsx)(o.Z,{variant:"contained",onClick:t,children:"Cancel"}),(0,u.jsx)(o.Z,{variant:"contained",onClick:function(){c(),t()},children:"Confirm"})]})]})}},9015:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(4165),a=t(1413),i=t(5861),s=t(9439),l=t(2791),o=t(5289),u=t(5661),c=t(9157),d=t(3767),f=t(7391),Z=t(7123),p=t(6151),x=t(5444),h=t(3766),m=t(184);var v=function(e){var n=e.value,t=e.setValue,o=e.disabled,u=l.useState(!0),c=(0,s.Z)(u,2),d=c[0],Z=c[1],p=l.useState([]),v=(0,s.Z)(p,2),j=v[0],g=v[1],b=l.useContext(x.Z).api;return l.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.people.getShortPeople();case 2:n=e.sent,g(n),Z(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b.people,b.driver]),(0,m.jsx)(h.Z,{disabled:o,fullWidth:!0,loading:d,value:n,options:j,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(n)},renderInput:function(e){return(0,m.jsx)(f.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Supervisor"}))},isOptionEqualToValue:function(e,n){return e.id===n.id}})};var j=function(e){var n=e.value,t=e.setValue,o=e.disabled,u=l.useState(!0),c=(0,s.Z)(u,2),d=c[0],Z=c[1],p=l.useState([]),v=(0,s.Z)(p,2),j=v[0],g=v[1],b=l.useContext(x.Z).api;return l.useEffect((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.org.getShortOrgs();case 2:n=e.sent,g(n),Z(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[b.org,b.driver]),(0,m.jsx)(h.Z,{multiple:!0,disabled:o,fullWidth:!0,loading:d,value:n,options:j,getOptionLabel:function(e){return e.name},onChange:function(e,n){return t(n)},renderInput:function(e){return(0,m.jsx)(f.Z,(0,a.Z)((0,a.Z)({},e),{},{label:"Team"}))},isOptionEqualToValue:function(e,n){return e.id===n.id}})},g={id:null,firstName:"",lastName:"",title:"",address:"",email:"",phone:"",supervisor:null,teams:[]};var b=function(e){var n=e.open,t=e.close,h=e.person,b=e.viewOnly,C=function(e){if(!e)return g;var n={};for(var t in g)void 0===e[t]?n[t]=g[t]:n[t]=e[t];return n}(h),S=l.useState(C),N=(0,s.Z)(S,2),k=N[0],w=N[1],y=l.useContext(x.Z).api;function E(){b||null!==h&&void 0!==h&&h.id||w(g),t()}function P(){return(P=(0,i.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,a.Z)({},k),null!==(n=k.supervisor)&&void 0!==n&&n.id&&(t.supervisor=k.supervisor.id),k.teams.length&&(t.teams=k.teams.map((function(e){return e.id}))),!k.id){e.next=8;break}return e.next=6,y.people.updatePerson(t);case 6:e.next=10;break;case 8:return e.next=10,y.people.addPerson(t);case 10:E();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O="Add New Person";return b?O="Person Info":null!==h&&void 0!==h&&h.id&&(O="Edit Info"),(0,m.jsxs)(o.Z,{maxWidth:"sm",fullWidth:!0,open:n,onClose:E,children:[(0,m.jsx)(u.Z,{align:"center",children:O}),(0,m.jsx)(c.Z,{children:(0,m.jsxs)(d.Z,{spacing:1,sx:{marginTop:1},children:[(0,m.jsx)(f.Z,{disabled:b,label:"First Name",fullWidth:!0,value:k.firstName,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{firstName:e.target.value}))}}),(0,m.jsx)(f.Z,{disabled:b,label:"Last Name",fullWidth:!0,value:k.lastName,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{lastName:e.target.value}))}}),(0,m.jsx)(f.Z,{disabled:b,label:"Title",fullWidth:!0,value:k.title,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{title:e.target.value}))}}),(0,m.jsx)(f.Z,{disabled:b,label:"Address",fullWidth:!0,value:k.address,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{address:e.target.value}))}}),(0,m.jsx)(f.Z,{disabled:b,label:"Email",fullWidth:!0,value:k.email,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{email:e.target.value}))}}),(0,m.jsx)(f.Z,{disabled:b,label:"Phone",fullWidth:!0,value:k.phone,onChange:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{phone:e.target.value}))}}),(0,m.jsx)(v,{disabled:b,value:k.supervisor,setValue:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{supervisor:e}))}}),(0,m.jsx)(j,{disabled:b,value:k.teams,setValue:function(e){return w((0,a.Z)((0,a.Z)({},k),{},{teams:e}))}})]})}),(0,m.jsxs)(Z.Z,{children:[(0,m.jsx)(p.Z,{onClick:E,variant:"contained",children:b?"Close":"Cancel"}),b?null:(0,m.jsx)(p.Z,{onClick:function(){return P.apply(this,arguments)},variant:"contained",children:"Submit"})]})]})}}}]);
//# sourceMappingURL=523.1da51ee2.chunk.js.map